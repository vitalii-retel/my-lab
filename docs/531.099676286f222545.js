"use strict";(self.webpackChunklab=self.webpackChunklab||[]).push([[531],{9531:(ut,E,h)=>{h.r(E),h.d(E,{ObjectThrowingComponent:()=>lt});var w=h(101),c=h(2346),o=h(3359),r=h(3889),e=h(7746),C=h(6814),O=h(4390),Z=new WeakMap;class ${get items(){return(0,e.Z)(this,Z)}constructor(i={}){(0,c.Z)(this,Z,{writable:!0,value:{}}),Object.assign((0,e.Z)(this,Z),i)}add(i,n){(0,o.Z)(this,Z,"function"!=typeof n?{...(0,e.Z)(this,Z),[i]:n}:{...(0,e.Z)(this,Z),[i]:n((0,e.Z)(this,Z)[i])})}}const H=25,P="on",M="time",K="timeSpeed";var v=new WeakMap,g=new WeakMap,Q=new WeakMap,L=new WeakMap,T=new WeakMap,U=new WeakMap,d=new WeakMap,m=new WeakMap,I=new WeakMap,_=new WeakMap,f=new WeakMap,B=new WeakMap,S=new WeakMap,D=new WeakSet,N=new WeakSet,Y=new WeakSet,F=new WeakSet,b=new WeakSet,W=new WeakSet;class R{get statistic(){return(0,e.Z)(this,f).items}constructor(i){(0,w.Z)(this,W),(0,w.Z)(this,b),(0,w.Z)(this,F),(0,w.Z)(this,Y),(0,w.Z)(this,N),(0,w.Z)(this,D),(0,c.Z)(this,v,{writable:!0,value:[]}),(0,c.Z)(this,g,{writable:!0,value:new WeakMap}),(0,c.Z)(this,Q,{writable:!0,value:new WeakMap}),(0,c.Z)(this,L,{writable:!0,value:1e3*this.ticksInterval}),(0,c.Z)(this,T,{writable:!0,value:"stopped"}),(0,c.Z)(this,U,{writable:!0,value:Date.now()}),(0,c.Z)(this,d,{writable:!0,value:Date.now()}),(0,c.Z)(this,m,{writable:!0,value:0}),(0,c.Z)(this,I,{writable:!0,value:void 0}),(0,c.Z)(this,_,{writable:!0,value:{real:Date.now(),space:Date.now()}}),(0,c.Z)(this,f,{writable:!0,value:new $({[P]:!1})}),(0,c.Z)(this,B,{writable:!0,value:void 0}),(0,c.Z)(this,S,{writable:!0,value:void 0}),this.ticksInterval=i}addObject(i,{x:n,y:a}){(0,e.Z)(this,v).push(i),(0,e.Z)(this,g).set(i,{x:n,y:a})}setCanvas(i){(0,o.Z)(this,I,i),(0,r.Z)(this,b,j).call(this)}start(){(0,o.Z)(this,T,"started"),(0,r.Z)(this,b,j).call(this),(0,e.Z)(this,f).add(P,!0),(0,e.Z)(this,_).real=Date.now(),(0,e.Z)(this,_).space=this.statistic[M]||0,(0,o.Z)(this,U,Date.now()),(0,o.Z)(this,d,(0,e.Z)(this,U)),(0,o.Z)(this,m,0),(0,r.Z)(this,D,q).call(this),(0,r.Z)(this,Y,X).call(this)}stop(){(0,o.Z)(this,T,"stopped"),(0,r.Z)(this,b,j).call(this),clearTimeout((0,e.Z)(this,B)),(0,e.Z)(this,S)&&cancelAnimationFrame((0,e.Z)(this,S)),(0,e.Z)(this,f).add(P,!1)}}function q(){if("stopped"===(0,e.Z)(this,T))return;const s=(0,e.Z)(this,m)===H?(0,e.Z)(this,d):Date.now();var i;if(s>(0,e.Z)(this,d))return(0,o.Z)(this,m,(i=(0,e.Z)(this,m),++i)),void(0,r.Z)(this,N,z).call(this);(0,o.Z)(this,m,0),(0,o.Z)(this,B,setTimeout(()=>(0,r.Z)(this,N,z).call(this),(0,e.Z)(this,d)-s))}function z(){if((0,e.Z)(this,v).some(i=>i.shouldStop({getObjPosition:n=>(0,e.Z)(this,g).get(n)})))return void this.stop();(0,e.Z)(this,v).forEach(i=>{const n=i.calculateNextPosition({getObjPosition:a=>(0,e.Z)(this,g).get(a),ticksInterval:this.ticksInterval});(0,e.Z)(this,Q).set(i,n)}),(0,e.Z)(this,v).forEach(i=>{(0,e.Z)(this,g).set(i,(0,e.Z)(this,Q).get(i))}),(0,e.Z)(this,f).add(M,i=>(i??0)+this.ticksInterval);const s=Date.now()-(0,e.Z)(this,_).real;s>1e3&&((0,e.Z)(this,f).add(K,1e3*(this.statistic[M]-(0,e.Z)(this,_).space)/s),(0,e.Z)(this,_).real+=s,(0,e.Z)(this,_).space=this.statistic[M]),(0,o.Z)(this,d,(0,e.Z)(this,d)+(0,e.Z)(this,L)),(0,r.Z)(this,D,q).call(this)}function X(){"stopped"!==(0,e.Z)(this,T)&&(0,o.Z)(this,S,requestAnimationFrame(()=>(0,r.Z)(this,F,V).call(this)))}function V(){(0,r.Z)(this,b,j).call(this),(0,r.Z)(this,Y,X).call(this)}function j(){if(!(0,e.Z)(this,I))return;const s=(0,e.Z)(this,I);s.clean(),(0,e.Z)(this,v).forEach(i=>i.draw({getObjPosition:n=>(0,e.Z)(this,g).get(n),cx:n=>n*s.scaleX,cy:n=>(s.sizeY-n)*s.scaleY,cdx:(n,a)=>(0,r.Z)(this,W,J).call(this,n*s.scaleX,a??0),cdy:(n,a)=>(0,r.Z)(this,W,J).call(this,-n*s.scaleY,a??0),cd:(n,a)=>(0,r.Z)(this,W,J).call(this,n*s.scaleX,a??0),ctx:s.ctx,theme:s.theme}))}function J(s,i){return s>=0?Math.max(s,i):Math.min(s,i)}var k=new WeakMap,A=new WeakMap;class tt{constructor(){(0,c.Z)(this,k,{writable:!0,value:0}),(0,c.Z)(this,A,{writable:!0,value:new O.$k})}get statistic(){return(0,e.Z)(this,A).items}shouldStop({getObjPosition:i}){return i(this).y<=0}calculateNextPosition({ticksInterval:i,getObjPosition:n}){(0,o.Z)(this,k,(0,e.Z)(this,k)+9.8*i);const a={x:n(this).x,y:n(this).y-i*(0,e.Z)(this,k)};return(0,e.Z)(this,A).add("speed",(0,e.Z)(this,k)),(0,e.Z)(this,A).add("altitude",a.y),a}draw({ctx:i,cx:n,cy:a,cd:p,getObjPosition:x,theme:l}){const{x:u,y}=x(this);i.beginPath(),i.strokeStyle=l.color,i.lineWidth=1,i.arc(n(u),a(y),p(.1,5),0,2*Math.PI),i.stroke()}}var it=h(7398),G=h(4936),t=h(9291);function et(s,i){if(1&s){const n=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(n);const p=t.oxw();return t.KtG(p.start())}),t._uU(1," Start "),t.qZA()}}function st(s,i){if(1&s){const n=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(n);const p=t.oxw();return t.KtG(p.stop())}),t._uU(1," Stop "),t.qZA()}}function nt(s,i){if(1&s&&(t.TgZ(0,"ui-statistic-line"),t.ynx(1,7),t._uU(2,"State"),t.BQk(),t.ynx(3,8),t._uU(4),t.BQk(),t.qZA()),2&s){const n=t.oxw().ngIf;t.xp6(4),t.Oqu(n.space.on?"on":"off")}}function at(s,i){if(1&s&&(t.TgZ(0,"ui-statistic-line"),t.ynx(1,7),t._uU(2,"Time"),t.BQk(),t.ynx(3,8),t._uU(4),t.ALo(5,"number"),t.BQk(),t.qZA()),2&s){const n=t.oxw().ngIf;t.xp6(4),t.hij("",t.xi3(5,1,n.space.time,"1.3-3")," s")}}function ct(s,i){if(1&s&&(t.TgZ(0,"ui-statistic-line"),t.ynx(1,7),t._uU(2,"Time speed"),t.BQk(),t.ynx(3,8),t._uU(4),t.ALo(5,"number"),t.BQk(),t.qZA()),2&s){const n=t.oxw().ngIf;let a;t.xp6(4),t.hij(" ",t.xi3(5,1,100*(null!==(a=n.space.timeSpeed)&&void 0!==a?a:0),"1.1-1")," % ")}}function ot(s,i){if(1&s&&(t.TgZ(0,"ui-statistic-line"),t.ynx(1,7),t._uU(2,"Speed"),t.BQk(),t.ynx(3,8),t._uU(4),t.ALo(5,"number"),t.BQk(),t.qZA()),2&s){const n=t.oxw().ngIf;t.xp6(4),t.hij(" ",t.xi3(5,1,n.ball.speed,"1.2-2")," m/s ")}}function rt(s,i){if(1&s&&(t.TgZ(0,"ui-statistic-line"),t.ynx(1,7),t._uU(2,"Altitude"),t.BQk(),t.ynx(3,8),t._uU(4),t.ALo(5,"number"),t.BQk(),t.qZA()),2&s){const n=t.oxw().ngIf;t.xp6(4),t.hij(" ",t.xi3(5,1,n.ball.altitude,"1.1-1")," m ")}}function ht(s,i){if(1&s&&(t.ynx(0),t.TgZ(1,"ui-statistic"),t.ynx(2,6),t._uU(3,"Space"),t.BQk(),t.YNc(4,nt,5,1,"ui-statistic-line",4),t.YNc(5,at,6,4,"ui-statistic-line",4),t.YNc(6,ct,6,4,"ui-statistic-line",4),t.qZA(),t.TgZ(7,"ui-statistic"),t.ynx(8,6),t._uU(9,"Ball"),t.BQk(),t.YNc(10,ot,6,4,"ui-statistic-line",4),t.YNc(11,rt,6,4,"ui-statistic-line",4),t.qZA(),t.BQk()),2&s){const n=i.ngIf;t.xp6(4),t.Q6J("ngIf",n.space.hasOwnProperty("on")),t.xp6(1),t.Q6J("ngIf",n.space.hasOwnProperty("time")),t.xp6(1),t.Q6J("ngIf",n.space.hasOwnProperty("timeSpeed")),t.xp6(4),t.Q6J("ngIf",n.ball.hasOwnProperty("speed")),t.xp6(1),t.Q6J("ngIf",n.ball.hasOwnProperty("altitude"))}}let lt=(()=>{var s=new WeakMap,i=new WeakMap,n=new WeakSet;class a{constructor(l){(0,w.Z)(this,n),(0,c.Z)(this,s,{writable:!0,value:void 0}),(0,c.Z)(this,i,{writable:!0,value:void 0}),this.cdr=l,this.statistic$=(0,O.WI)(()=>({space:(0,e.Z)(this,s)?.statistic??{},ball:(0,e.Z)(this,i)?.statistic??{}})),this.started$=this.statistic$.pipe((0,it.U)(u=>u.space.on))}reset(){(0,r.Z)(this,n,p).call(this),(0,o.Z)(this,s,new R(.005)),(0,o.Z)(this,i,new tt),(0,e.Z)(this,s).addObject((0,e.Z)(this,i),{x:100,y:1500}),(0,e.Z)(this,s).setCanvas(this.canvasComponent)}start(){(0,e.Z)(this,s)?.start()}stop(){(0,e.Z)(this,s)?.stop()}ngAfterViewInit(){this.reset(),this.cdr.detectChanges()}ngOnDestroy(){(0,r.Z)(this,n,p).call(this)}}function p(){this.stop(),(0,o.Z)(this,s,void 0),(0,o.Z)(this,i,void 0)}return a.\u0275fac=function(l){return new(l||a)(t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["lab-object-throwing"]],viewQuery:function(l,u){if(1&l&&t.Gf(O.cY,5),2&l){let y;t.iGM(y=t.CRH())&&(u.canvasComponent=y.first)}},standalone:!0,features:[t.jDz],decls:11,vars:11,consts:[[1,"control-panel"],[1,"buttons"],["type","button",3,"click"],["type","button",3,"click",4,"ngIf"],[4,"ngIf"],[3,"sizeX","sizeY"],["title",""],["label",""],["value",""]],template:function(l,u){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return u.reset()}),t._uU(3,"Reset"),t.qZA(),t.YNc(4,et,2,0,"button",3),t.ALo(5,"async"),t.YNc(6,st,2,0,"button",3),t.ALo(7,"async"),t.qZA(),t.YNc(8,ht,12,5,"ng-container",4),t.ALo(9,"async"),t.qZA(),t._UZ(10,"tick-canvas",5)),2&l&&(t.xp6(4),t.Q6J("ngIf",!t.lcZ(5,5,u.started$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,7,u.started$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,9,u.statistic$)),t.xp6(2),t.Q6J("sizeX",2e3)("sizeY",1500))},dependencies:[C.ez,C.O5,C.Ov,C.JJ,O.cY,G._E,G.Dd],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:1em;height:100%}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]{display:grid;gap:1em;align-content:start}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:.5em}"],changeDetection:0}),a})()}}]);